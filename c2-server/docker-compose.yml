version: '3'
services:

  redis: 
    image: "redis:latest"
    ports:
      - "6379:6379"

  minio:
      image: quay.io/minio/minio
      command: server /data --console-address ":9001"
      ports:
        - "9000:9000"
        - "9001:9001"
      environment:
        - MINIO_ROOT_USER=test123test
        - MINIO_ROOT_PASSWORD=test123test
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    depends_on:
      - minio
      - redis
    ports:
      - "3000:3000"  # Expose backend API port

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3001:3000" 

    depends_on:
      - backend 

    environment:
      - API_URL=http://backend:3000 
    command: ["npm", "run", "dev"] 
