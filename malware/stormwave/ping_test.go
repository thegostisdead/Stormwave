package main

import (
	"fmt"
	"testing"
)

func TestPing(t *testing.T) {
	// Replace "127.0.0.1" with the actual IP address you want to test against
	targetIP := "127.0.0.1"

	params := PingParams{
		TargetIp: targetIP,
	}

	success, err := ping(params)
	fmt.Println(success)

	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}

	if !success {
		t.Errorf("Ping test failed. Expected success, got failure.")
	}
}

func TestPingWithInvalidIP(t *testing.T) {
	// Using an invalid IP address to trigger a resolution error
	params := PingParams{
		TargetIp: "invalid-ip",
	}

	success, err := ping(params)

	if err == nil {
		t.Errorf("Expected error, but got success")
	}

	if success {
		t.Errorf("Ping test with invalid IP should not be successful.")
	}
}

func TestPingTimeout(t *testing.T) {
	// Using a non-responsive IP to simulate a timeout
	params := PingParams{
		TargetIp: "192.1.2.3", // Replace with an IP that is not responsive
	}

	success, err := ping(params)

	if err != nil {
		t.Errorf("Expected error, but got success")
	}

	if success {
		t.Errorf("Ping test with timeout should not be successful.")
	}
}
