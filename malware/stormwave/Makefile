
GO = go
GO_WIN_32 = GOOS=windows GOARCH=386
GO_WIN_64 = GOOS=windows GOARCH=amd64
PACKAGE=stormwave

WIN_64_BIN = stormwave64.exe
WIN_32_BIN = stormwave32.exe
WIN_64_BIN_DEBUG = stormwave64-debug.exe
WIN_32_BIN_DEBUG = stormwave32-debug.exe

run:
	go run main.go

build:
	echo "Compiling for Windows x64 bit"
	echo "=============================="
	GOOS=windows GOARCH=amd64 go build -o bin/main-win64.exe stormwave

compile:
	echo "Compiling for windows x32 and x64"
	$(GO_WIN_64) $(GO) build -o bin/$(WIN_64_BIN) $(PACKAGE)
	$(GO_WIN_32) $(GO) build -o bin/$(WIN_32_BIN) $(PACKAGE)

compile-debug:
	echo "Compiling for windows x32 and x64"
	$(GO_WIN_64) $(GO) build -ldflags="-X '$(PACKAGE)/main.DEBUG=true' -X '$(PACKAGE)/main.DetectSandbox=false'" -o bin/$(WIN_64_BIN_DEBUG) $(PACKAGE)
	$(GO_WIN_32) $(GO) build -ldflags="-X '$(PACKAGE)/main.DEBUG=true' -X '$(PACKAGE)/main.DetectSandbox=false'" -o bin/$(WIN_32_BIN_DEBUG) $(PACKAGE)

test:
	$(GO_WIN_64) $(GO) test