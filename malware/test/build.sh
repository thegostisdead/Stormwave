#!/bin/bash

projectPath=$1 # Path to the project directory

# STEP 1: Set the Uuid variable
Uuid=$2

subkey1=$(date +%s%N) # Generating a unique subkey using current timestamp in nanoseconds

# STEP 2: Build the Go application
cd $projectPath
go build -ldflags="-X 'main.Uuid=$Uuid'" -o "${subkey1}.exe"

# Optional: Check if the build was successful
if [ $? -eq 0 ]; then
    echo "${subkey1}.exe"
else
    exit 1
fi